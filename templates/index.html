{% extends './home.html' %}

{% block body%}
<!-- Panel de interacción -->
<div class="text-center">
    <img src="{{ url_for('static', filename='css/img/agavi.jpg') }}" alt="Logo" width="100" height="90" class="d-inline-block align-text-top">
    <p>Hola soy agavi... ¿cómo puedo ayudarte?</p>
    <p>Hi, I'm Agavi... How can I help you?</p>
    
    <div class="chat-box scrollspy-example-2" data-bs-spy="scroll" data-bs-target="#navbar-example3" data-bs-smooth-scroll="true" tabindex="0" autocomplete = "off">

        {% for persona, mensaje in respuestas_chat %}
            {% if persona == "Tu" %}
                <h5><img src="{{ url_for('static', filename='css/img/usuario.jpg') }}" alt="Logo" width="100" height="90" ><p class="badge text-bg-secondary"><strong>{{ persona }}:</strong> {{ mensaje }}</p></h5>
            {% endif %}
            
            {% if persona == "Agavi" %}
                <h5><img src="{{ url_for('static', filename='css/img/agavi.jpg') }}" alt="Logo" width="100" height="90" ><p class="badge text-bg-success"><strong>{{ persona }}:</strong> {{ mensaje }}</p></h5>
            {% endif %}
            <br>
        {% endfor %}

    </div>

    <form action="{{ url_for('home') }}" method="post" class="input-group mx-auto p-4">
        <input type="text" name="askHuman" class="form-control" placeholder="Ej: ¿Dónde hay buenos restaurantes...? | Ex: Where are good restaurants...?" aria-label="Recipient's username" aria-describedby="button-addon2" required>
        <button class="btn btn-outline-success" type="submit" id="button-addon2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-left-text-fill" viewBox="0 0 16 16">
                <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4.414a1 1 0 0 0-.707.293L.854 15.146A.5.5 0 0 1 0 14.793V2zm3.5 1a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 2.5a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 2.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5z"/>
            </svg>
        </button>
    </form>
        <!-- Botón para limpiar el chat utilizando JavaScript -->
        <div id="liveAlertPlaceholder" class="mx-auto p-5" ></div>
        <button type="button" class="btn btn-success " id="liveAlertBtn">Limpiar Chat</button>
        <br>
    

    <img src="{{ url_for('static', filename='css/img/logob2.jpg') }}" alt="Logo" width="70" height="65" class="d-inline-block align-text-top">
    <!-- Script para ejecutar el boton -->
    <script>
      const alertPlaceholder = document.getElementById('liveAlertPlaceholder')
const appendAlert = (message, type) => {
  const wrapper = document.createElement('div')
  wrapper.innerHTML = [
    `<div class="alert alert-${type} alert-dismissible" role="alert">`,
    `   <div>${message}</div>`,
    '   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>',
    '</div>'
  ].join('')

  alertPlaceholder.append(wrapper)
}

const alertTrigger = document.getElementById('liveAlertBtn')
if (alertTrigger) {
  alertTrigger.addEventListener('click', () => {
    appendAlert('Para limpiar el chat escribe "limpiar"', 'success')
  })
}
    </script>
</div>
{% endblock %}
